<div ng-class="{'overlay-active': ui.currentJob}">
<nav id="addSite" class="navmenu navmenu-default navmenu-fixed-right navmenu-inverse offcanvas">
  <div ui-view></div>
</nav>

<div id="overlay" ng-if="ui.currentJob" ng-class="ui.currentJob.action">
  <h1 ng-bind="ui.currentJob.title"></h1>
  <h2 class="random-message" ng-bind="ui.currentJob.message"></h2>
  <div class="clouds">
    <i id="cloud-light" class="cloud"></i>
    <i id="cloud-white" class="cloud"></i>
    <i id="cloud-gray" class="cloud"></i>
    <i id="cloud-dark" class="cloud"></i>
    <i id="cloud-front" class="cloud"></i>
  </div>
</div>
<div class="container">
  <div class="row header">
    <div ng-if="ui.devMode" class="col-xs-12 dev-mode">
      <div class="alert alert-danger" role="alert">WARNING FOOL, DEV MODE IS ACTIVE!!!</div>
    </div>
    <div class="col-xs-1">
      <img class="logo" src="images/kalabox-blue.svg" alt="Really good looking logo of Kalabox" />
    </div>
    <div class="col-xs-8">
      <form class="form-inline">
        <div class="form-group">
          <label class="sr-only" for="siteSearch">Site search</label>
          <input type="search" ng-model="siteSearch" class="form-control" id="siteSearch" placeholder="Filter by site name">
        </div>
      </form>
    </div>
    <div class="col-xs-3">
      <a href="" ui-sref='dashboard.sidebar' ui-sref-opts='{location: false}' class="btn btn-primary" data-toggle="offcanvas" data-target="#addSite" data-autohide="false">Add Site</a>
    </div>
  </div>
  <div class="sites row">
    <div ng-repeat="site in ui.sites | filter:siteSearch" ng-controller="SiteCtrl">
      <div class="site-wrapper col-xs-6">
        <div class="site" ng-class="siteClasses()">
          <div class="row image">
            <a ng-href="" site-browser><img class="col-xs-12 img-responsive" alt="Snapshot of your site"  ng-src="{{site.image}}"/></a>
          </div>
          <div class="row">
            <div class="site-info col-xs-12">
              <h3 ng-bind="site.name" site-browser></h3>
              <div class="site-actions">
                <a ng-href="" site-toggle class="btn btn-default site-power" ng-class="{'site-up': ui.states[site.name]}"><i class="fa fa-power-off fa-2"></i><span> Start</span></a>
                <div class="btn-group dropdown" uib-dropdown auto-close="outsideClick">
                  <div class="btn btn-default site-actions-dropdown" uib-dropdown-toggle>
                    <i class="fa fa-cog fa-2"></i>
                    <span> Actions</span>
                  </div>
                  <ul uib-dropdown-menu>
                    <li><a ng-href="" site-code><i class="fa fa-folder-o fa-2"></i> <span>Code</span></a></li>
                    <li><a ng-href="" site-pull><i class="fa fa-cloud-download fa-2"></i> <span>Pull</span></a></li>
                    <li><a ng-href="" site-push><i class="fa fa-cloud-upload fa-2"></i> <span>Push</span></a></li>
                    <li><a ng-href="" site-trash><i class="fa fa-trash-o fa-2"></i> <span>Delete</span></a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
